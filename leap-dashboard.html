<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEAP Evidence Dashboard</title>
    <style>
        body { font-family: Arial; margin: 0; background: #f5f5f5; padding: 10px; }
        .header { background: linear-gradient(135deg, #003087, #0066cc); color: white; padding: 20px; text-align: center; border-radius: 8px; margin-bottom: 20px; }
        .header h1 { font-size: 2.2em; margin: 0 0 8px 0; }
        .header p { margin: 0; opacity: 0.9; }
        .connection-info { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .success-info { background: #e8f5e9; border-left: 4px solid #4caf50; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .stat { background: white; padding: 20px; border-radius: 8px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border-left: 4px solid #003087; }
        .stat-number { font-size: 2.5em; font-weight: bold; color: #003087; margin-bottom: 5px; }
        .stat-label { color: #666; font-size: 0.9em; }
        .controls { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; }
        .btn { background: #003087; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; margin: 5px; font-size: 14px; transition: background 0.3s ease; }
        .btn:hover { background: #0066cc; }
        .btn.secondary { background: #6c757d; }
        .btn.secondary:hover { background: #5a6268; }
        .evidence-container { background: white; border-radius: 8px; padding: 25px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .section-title { color: #003087; font-size: 1.4em; margin-bottom: 20px; border-bottom: 2px solid #e9ecef; padding-bottom: 10px; }
        .evidence-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .evidence-table th { background: #003087; color: white; padding: 15px 10px; text-align: center; font-weight: bold; font-size: 14px; }
        .evidence-table td { padding: 15px 10px; text-align: center; border: 1px solid #ddd; cursor: pointer; transition: all 0.3s ease; }
        .evidence-table td:first-child { background: #f8f9fa; font-weight: bold; text-align: left; cursor: default; width: 180px; }
        .evidence-table td:hover:not(:first-child) { transform: scale(1.05); box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 10; }
        .count { font-size: 1.8em; font-weight: bold; display: block; margin-bottom: 3px; }
        .label { font-size: 0.85em; color: #666; }
        .high-evidence { background: linear-gradient(135deg, #d4edda, #c3e6cb); border-left: 4px solid #28a745; }
        .medium-evidence { background: linear-gradient(135deg, #fff3cd, #ffeaa7); border-left: 4px solid #ffc107; }
        .low-evidence { background: linear-gradient(135deg, #f8d7da, #f5c6cb); border-left: 4px solid #dc3545; }
        .no-evidence { background: linear-gradient(135deg, #f8f9fa, #e9ecef); border-left: 4px solid #6c757d; }
        .status { margin-left: 15px; font-weight: bold; color: #666; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
        .modal-content { background-color: white; margin: 5% auto; padding: 30px; border-radius: 8px; width: 90%; max-width: 600px; position: relative; max-height: 80vh; overflow-y: auto; }
        .close { position: absolute; right: 15px; top: 15px; font-size: 24px; cursor: pointer; color: #999; }
        .close:hover { color: #000; }
        .detail-section { background: #f8f9fa; padding: 15px; border-radius: 6px; margin: 15px 0; border-left: 4px solid #003087; }
        .loading { text-align: center; padding: 20px; color: #666; }
        .loading-spinner { border: 4px solid #f3f3f3; border-top: 4px solid #003087; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="header">
        <h1>üèõÔ∏è LEAP Evidence Dashboard</h1>
        <p>Queensland Government - Land Evaluation Assessment Portal</p>
    </div>
    
    <div id="connectionStatus">
        <div class="connection-info">
            <strong>üîó Data Source:</strong> Queensland Government LEAP Database<br>
            <strong>Service:</strong> uat-qportal.information.qld.gov.au<br>
            <strong>Status:</strong> <span id="statusText">Waiting for Experience Builder data...</span>
        </div>
    </div>
    
    <div class="stats">
        <div class="stat">
            <div class="stat-number" id="totalParcels">--</div>
            <div class="stat-label">Total Claim Parcels</div>
        </div>
        <div class="stat">
            <div class="stat-number" id="assessmentCount">--</div>
            <div class="stat-label">Total Assessments</div>
        </div>
        <div class="stat">
            <div class="stat-number" id="completionRate">--%</div>
            <div class="stat-label">Completion Rate</div>
        </div>
        <div class="stat">
            <div class="stat-number" id="activeGroups">--</div>
            <div class="stat-label">Traditional Owner Groups</div>
        </div>
    </div>
    
    <div class="controls">
        <button class="btn" onclick="requestLEAPData()">üîÑ Request LEAP Data from Experience Builder</button>
        <button class="btn" onclick="refreshDashboard()">üîÑ Refresh Dashboard</button>
        <button class="btn secondary" onclick="exportData()">üìä Export Assessment Matrix</button>
        <button class="btn secondary" onclick="openLEAPEdit()">‚úèÔ∏è Open LEAP Edit Interface</button>
        <span class="status">Last Updated: <span id="lastUpdated">Never</span></span>
    </div>
    
    <div class="evidence-container">
        <h2 class="section-title">Assessment Evidence Matrix - Traditional Owner Groups</h2>
        
        <div id="loadingIndicator" class="loading" style="display: none;">
            <div class="loading-spinner"></div>
            <p>Processing Queensland Government LEAP assessment data...</p>
        </div>
        
        <table class="evidence-table" id="evidenceTable">
            <thead>
                <tr>
                    <th>Assessment Type</th>
                    <th id="group1">Loading...</th>
                    <th id="group2">Loading...</th>
                    <th id="group3">Loading...</th>
                    <th id="group4">Loading...</th>
                    <th id="group5">Loading...</th>
                </tr>
            </thead>
            <tbody id="evidenceTableBody">
                <tr>
                    <td>Vegetation Assessment</td>
                    <td class="medium-evidence" onclick="showRealDetails('Vegetation', 0)">
                        <span class="count" id="veg-0">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Vegetation', 1)">
                        <span class="count" id="veg-1">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Vegetation', 2)">
                        <span class="count" id="veg-2">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Vegetation', 3)">
                        <span class="count" id="veg-3">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Vegetation', 4)">
                        <span class="count" id="veg-4">--</span>
                        <span class="label">assessments</span>
                    </td>
                </tr>
                <tr>
                    <td>Environmental Condition</td>
                    <td class="medium-evidence" onclick="showRealDetails('Environmental', 0)">
                        <span class="count" id="env-0">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Environmental', 1)">
                        <span class="count" id="env-1">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Environmental', 2)">
                        <span class="count" id="env-2">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Environmental', 3)">
                        <span class="count" id="env-3">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Environmental', 4)">
                        <span class="count" id="env-4">--</span>
                        <span class="label">assessments</span>
                    </td>
                </tr>
                <tr>
                    <td>Land Use Assessment</td>
                    <td class="medium-evidence" onclick="showRealDetails('Land Use', 0)">
                        <span class="count" id="land-0">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Land Use', 1)">
                        <span class="count" id="land-1">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Land Use', 2)">
                        <span class="count" id="land-2">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Land Use', 3)">
                        <span class="count" id="land-3">--</span>
                        <span class="label">assessments</span>
                    </td>
                    <td class="medium-evidence" onclick="showRealDetails('Land Use', 4)">
                        <span class="count" id="land-4">--</span>
                        <span class="label">assessments</span>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Assessment Details</h2>
            <p id="modalDescription"></p>
            <div id="modalContent"></div>
            <div style="margin-top: 25px; text-align: center;">
                <button class="btn" onclick="editAssessment()">‚úèÔ∏è Edit in LEAP</button>
                <button class="btn" onclick="generateReport()">üìÑ Generate Report</button>
                <button class="btn" onclick="addNewAssessment()">‚ûï Add New Assessment</button>
                <button class="btn secondary" onclick="closeModal()">‚ùå Close</button>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables for LEAP data
        let leapData = null;
        let traditionalOwnerGroups = [];
        let assessmentMatrix = {};
        let realDataReceived = false;
        
        // Listen for messages from Experience Builder
        window.addEventListener('message', function(event) {
            console.log('Message received from Experience Builder:', event.data);
            
            // Check if this is LEAP data from Experience Builder
            if (event.data && (event.data.records || event.data.features)) {
                console.log('LEAP data received from Experience Builder!');
                processExperienceBuilderData(event.data);
            }
        });
        
        // Process data received from Experience Builder
        function processExperienceBuilderData(data) {
            showLoadingIndicator(true);
            updateStatusText('Processing Queensland Government LEAP data...');
            
            try {
                // Handle different data formats from Experience Builder
                let features = data.records || data.features || data;
                if (!Array.isArray(features) && features.features) {
                    features = features.features;
                }
                
                if (!Array.isArray(features)) {
                    console.log('Converting single feature to array');
                    features = [features];
                }
                
                console.log('Processing', features.length, 'LEAP records from Experience Builder');
                
                leapData = features;
                realDataReceived = true;
                
                // Show success message
                showSuccessMessage('Successfully connected to Queensland Government LEAP Database via Experience Builder');
                updateStatusText('Connected to real LEAP data ‚úì');
                
                // Process the real data
                processRealLEAPData(features);
                
                document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
                
            } catch (error) {
                console.error('Error processing Experience Builder data:', error);
                updateStatusText('Error processing LEAP data');
                showDemoData();
            }
            
            showLoadingIndicator(false);
        }
        
        function processRealLEAPData(features) {
            console.log('Processing real LEAP data...');
            console.log('Sample feature:', features[0]);
            
            // Extract Traditional Owner groups from real data
            extractTraditionalOwnerGroups(features);
            
            // Process assessment data by group and type
            processAssessmentsByGroup(features);
            
            // Update the interface with real data
            updateTableHeaders();
            updateEvidenceMatrix();
            updateStatistics(features);
            
            console.log('Dashboard updated with real LEAP data');
        }
        
        function extractTraditionalOwnerGroups(features) {
            const uniqueGroups = new Set();
            
            // Look for Traditional Owner group field in the data
            const sampleFeature = features[0];
            const attributes = sampleFeature.attributes || sampleFeature;
            
            // Try common field names for Traditional Owner groups
            const possibleGroupFields = [
                'claim_n',           // Your specific field - highest priority
                'CLAIM_N',           // Uppercase version
                'TRADITIONAL_OWNER', 
                'CLAIM_GROUP', 
                'OWNER_GROUP', 
                'CLAIMANT_NAME', 
                'GROUP_NAME', 
                'PEOPLE'
            ];
            
            let groupField = null;
            for (const fieldName of possibleGroupFields) {
                if (attributes.hasOwnProperty(fieldName)) {
                    groupField = fieldName;
                    console.log('Found Traditional Owner field:', fieldName);
                    break;
                }
            }
            
            // If no obvious field found, look for any string field with group-like values
            if (!groupField) {
                for (const [key, value] of Object.entries(attributes)) {
                    if (typeof value === 'string' && value.length > 0 && 
                        (value.toLowerCase().includes('people') || 
                         value.toLowerCase().includes('group') ||
                         value.toLowerCase().includes('nation'))) {
                        groupField = key;
                        console.log('Using field as group identifier:', key);
                        break;
                    }
                }
            }
            
            // Extract unique groups
            if (groupField) {
                features.forEach(feature => {
                    const attrs = feature.attributes || feature;
                    const group = attrs[groupField];
                    if (group && group.trim()) {
                        uniqueGroups.add(group.trim());
                    }
                });
            }
            
            // Convert to array and limit to 5 groups for display
            traditionalOwnerGroups = Array.from(uniqueGroups).slice(0, 5);
            
            // If no groups found, create generic ones
            if (traditionalOwnerGroups.length === 0) {
                traditionalOwnerGroups = ['Group 1', 'Group 2', 'Group 3', 'Group 4', 'Group 5'];
            }
            
            console.log('Traditional Owner Groups found:', traditionalOwnerGroups);
        }
        
        function extractTraditionalOwnerGroups(features) {
            const uniqueGroups = new Set();
            const sampleFeature = features[0];
            const attributes = sampleFeature.attributes || sampleFeature;
            
            // Your specific field name first, then fallbacks
            const possibleGroupFields = [
                'claim_n',           // Queensland Government LEAP field
                'CLAIM_N',           // Uppercase version
                'CLAIM_NAME',
                'TRADITIONAL_OWNER', 
                'CLAIM_GROUP', 
                'OWNER_GROUP'
            ];
            
            let groupField = 'claim_n'; // Default to your field
            
            // Verify the field exists in your data
            if (!attributes.hasOwnProperty('claim_n') && !attributes.hasOwnProperty('CLAIM_N')) {
                // If claim_n doesn't exist, look for alternatives
                for (const fieldName of possibleGroupFields) {
                    if (attributes.hasOwnProperty(fieldName)) {
                        groupField = fieldName;
                        break;
                    }
                }
            }
            
            console.log('Using Traditional Owner field:', groupField);
            console.log('Sample value:', attributes[groupField]);
            
            // Extract unique groups from claim_n field
            if (groupField && attributes.hasOwnProperty(groupField)) {
                features.forEach(feature => {
                    const attrs = feature.attributes || feature;
                    const group = attrs[groupField];
                    if (group && group.trim()) {
                        uniqueGroups.add(group.trim());
                    }
                });
            }
            
            traditionalOwnerGroups = Array.from(uniqueGroups).slice(0, 5);
            
            if (traditionalOwnerGroups.length === 0) {
                traditionalOwnerGroups = ['Group 1', 'Group 2', 'Group 3', 'Group 4', 'Group 5'];
            }
            
            console.log('Traditional Owner Groups from claim_n:', traditionalOwnerGroups);
        }
        
        function hasVegetationData(attributes) {
            // Look for vegetation-related fields
            const vegKeywords = ['VEG', 'VEGETATION', 'PLANT', 'FLORA', 'TREE', 'GRASS', 'SHRUB'];
            return Object.keys(attributes).some(key => 
                vegKeywords.some(keyword => 
                    key.toUpperCase().includes(keyword) && attributes[key] != null
                )
            );
        }
        
        function hasEnvironmentalData(attributes) {
            // Look for environmental-related fields
            const envKeywords = ['ENV', 'ENVIRONMENT', 'CONDITION', 'QUALITY', 'ECOSYSTEM', 'HABITAT'];
            return Object.keys(attributes).some(key => 
                envKeywords.some(keyword => 
                    key.toUpperCase().includes(keyword) && attributes[key] != null
                )
            );
        }
        
        function hasLandUseData(attributes) {
            // Look for land use-related fields
            const landKeywords = ['LAND', 'USE', 'ZONING', 'PURPOSE', 'ACTIVITY', 'MANAGEMENT'];
            return Object.keys(attributes).some(key => 
                landKeywords.some(keyword => 
                    key.toUpperCase().includes(keyword) && attributes[key] != null
                )
            );
        }
        
        function updateTableHeaders() {
            for (let i = 0; i < 5; i++) {
                const header = document.getElementById(`group${i + 1}`);
                if (header) {
                    header.textContent = traditionalOwnerGroups[i] || `Group ${i + 1}`;
                }
            }
        }
        
        function updateEvidenceMatrix() {
            for (let i = 0; i < traditionalOwnerGroups.length && i < 5; i++) {
                const group = traditionalOwnerGroups[i];
                
                // Update vegetation counts
                const vegCount = assessmentMatrix.vegetation[group] || 0;
                updateCellCount(`veg-${i}`, vegCount);
                
                // Update environmental counts
                const envCount = assessmentMatrix.environmental[group] || 0;
                updateCellCount(`env-${i}`, envCount);
                
                // Update land use counts
                const landCount = assessmentMatrix.landUse[group] || 0;
                updateCellCount(`land-${i}`, landCount);
            }
        }
        
        function updateCellCount(elementId, count) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = count;
                
                // Update cell styling based on count
                const cell = element.closest('td');
                if (cell) {
                    cell.className = getEvidenceClass(count);
                    cell.onclick = function() { 
                        showRealDetails(getAssessmentType(elementId), getGroupIndex(elementId));
                    };
                }
            }
        }
        
        function getEvidenceClass(count) {
            if (count >= 100) return 'high-evidence';
            if (count >= 20) return 'medium-evidence';
            if (count >= 1) return 'low-evidence';
            return 'no-evidence';
        }
        
        function getAssessmentType(elementId) {
            if (elementId.startsWith('veg-')) return 'Vegetation';
            if (elementId.startsWith('env-')) return 'Environmental';
            if (elementId.startsWith('land-')) return 'Land Use';
            return 'Unknown';
        }
        
        function getGroupIndex(elementId) {
            return parseInt(elementId.split('-')[1]) || 0;
        }
        
        function updateStatistics(features) {
            document.getElementById('totalParcels').textContent = features.length.toLocaleString();
            
            let totalAssessments = 0;
            let completedAssessments = 0;
            
            features.forEach(feature => {
                const attrs = feature.attributes || feature;
                let hasAnyAssessment = false;
                
                if (hasVegetationData(attrs) || hasEnvironmentalData(attrs) || hasLandUseData(attrs)) {
                    totalAssessments++;
                    hasAnyAssessment = true;
                }
                
                // Consider complete if has multiple types of data
                if (hasAnyAssessment) {
                    const dataCount = [
                        hasVegetationData(attrs),
                        hasEnvironmentalData(attrs),
                        hasLandUseData(attrs)
                    ].filter(Boolean).length;
                    
                    if (dataCount >= 2) {
                        completedAssessments++;
                    }
                }
            });
            
            document.getElementById('assessmentCount').textContent = totalAssessments.toLocaleString();
            document.getElementById('activeGroups').textContent = traditionalOwnerGroups.length;
            
            const completionRate = totalAssessments > 0 ? Math.round((completedAssessments / totalAssessments) * 100) : 0;
            document.getElementById('completionRate').textContent = completionRate + '%';
        }
        
        function showRealDetails(assessmentType, groupIndex) {
            const groupName = traditionalOwnerGroups[groupIndex] || 'Unknown Group';
            
            let count = 0;
            switch (assessmentType) {
                case 'Vegetation':
                    count = assessmentMatrix.vegetation[groupName] || 0;
                    break;
                case 'Environmental':
                    count = assessmentMatrix.environmental[groupName] || 0;
                    break;
                case 'Land Use':
                    count = assessmentMatrix.landUse[groupName] || 0;
                    break;
            }
            
            document.getElementById('modalTitle').textContent = `${assessmentType} Assessment - ${groupName}`;
            document.getElementById('modalDescription').textContent = 
                `Found ${count} ${assessmentType.toLowerCase()} assessments for ${groupName} in the Queensland Government LEAP database.`;
            
            document.getElementById('modalContent').innerHTML = `
                <div class="detail-section">
                    <strong>üìä Real Queensland Government Data:</strong><br>
                    ‚Ä¢ Assessment count: ${count}<br>
                    ‚Ä¢ Traditional Owner Group: ${groupName}<br>
                    ‚Ä¢ Assessment Type: ${assessmentType}<br>
                    ‚Ä¢ Data Source: Queensland LEAP Database<br>
                    ‚Ä¢ Total LEAP records: ${leapData ? leapData.length.toLocaleString() : 'Unknown'}<br>
                    ‚Ä¢ Connection: Experience Builder authenticated session<br>
                    ‚Ä¢ Last updated: ${new Date().toLocaleString()}
                </div>
                <div class="detail-section">
                    <strong>üîß Available Actions:</strong><br>
                    ‚Ä¢ Edit assessments in LEAP interface<br>
                    ‚Ä¢ Generate detailed compliance reports<br>
                    ‚Ä¢ Add new assessment records<br>
                    ‚Ä¢ Export data for external analysis<br>
                    ‚Ä¢ Schedule follow-up assessments
                </div>
                <div class="detail-section">
                    <strong>üìà Data Quality Metrics:</strong><br>
                    ‚Ä¢ Data source: ${realDataReceived ? 'Live Queensland Government LEAP Database' : 'Demonstration data'}<br>
                    ‚Ä¢ Records found: ${count}<br>
                    ‚Ä¢ Data completeness: ${count > 0 ? 'Available' : 'No records'}<br>
                    ‚Ä¢ Authentication: ${realDataReceived ? 'Authenticated via Experience Builder' : 'Demo mode'}<br>
                    ‚Ä¢ Compliance status: ${count > 0 ? 'Active monitoring' : 'Requires attention'}
                </div>
            `;
            
            document.getElementById('detailModal').style.display = 'block';
        }
        
        // User interface functions
        function requestLEAPData() {
            updateStatusText('Requesting data from Experience Builder...');
            
            // Request data from parent Experience Builder
            if (window.parent) {
                window.parent.postMessage({
                    type: 'requestLEAPData',
                    source: 'dashboard'
                }, '*');
            }
            
            // Also try to trigger the List widget selection
            setTimeout(() => {
                if (!realDataReceived) {
                    updateStatusText('No data received - using demonstration data');
                    showDemoData();
                }
            }, 5000);
        }
        
        function refreshDashboard() {
            if (realDataReceived && leapData) {
                processRealLEAPData(leapData);
                updateStatusText('Dashboard refreshed with real LEAP data ‚úì');
            } else {
                requestLEAPData();
            }
        }
        
        function showDemoData() {
            // Fallback to demonstration data
            traditionalOwnerGroups = ['Budjiti People', 'Wakka Wakka People', 'Kunja People', 'Jamilaraay People', 'Yuwaalaraay People'];
            
            assessmentMatrix = {
                vegetation: {'Budjiti People': 156, 'Wakka Wakka People': 134, 'Kunja People': 98, 'Jamilaraay People': 87, 'Yuwaalaraay People': 67},
                environmental: {'Budjiti People': 203, 'Wakka Wakka People': 167, 'Kunja People': 123, 'Jamilaraay People': 109, 'Yuwaalaraay People': 82},
                landUse: {'Budjiti People': 89, 'Wakka Wakka People': 78, 'Kunja People': 56, 'Jamilaraay People': 45, 'Yuwaalaraay People': 34}
            };
            
            updateTableHeaders();
            updateEvidenceMatrix();
            
            document.getElementById('totalParcels').textContent = '1,247';
            document.getElementById('assessmentCount').textContent = '892';
            document.getElementById('completionRate').textContent = '72%';
            document.getElementById('activeGroups').textContent = '5';
        }
        
        function exportData() {
            const dataType = realDataReceived ? 'real Queensland Government LEAP data' : 'demonstration data';
            alert(`üìä Export Assessment Matrix:\n\nThis will export the ${dataType
